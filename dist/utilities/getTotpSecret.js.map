{"version":3,"sources":["../../src/utilities/getTotpSecret.ts"],"sourcesContent":["import type { Payload, User } from 'payload'\n\ntype Args = {\n\tcollection: string\n\tpayload: Payload\n\tuser: User\n}\n\nexport async function getTotpSecret({\n\tcollection,\n\tpayload,\n\tuser,\n}: Args): Promise<string | undefined> {\n\tif (!user) {\n\t\treturn undefined\n\t}\n\n\tlet totpSecret: string | undefined\n\n\ttry {\n\t\tconst result = (await payload.findByID({\n\t\t\tid: user.id,\n\t\t\tcollection,\n\t\t\toverrideAccess: true,\n\t\t\tselect: {\n\t\t\t\ttotpSecret: true,\n\t\t\t},\n\t\t\tshowHiddenFields: true,\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\t\t} as any)) as { totpSecret?: null | string } // TODO: Report this to Payload\n\t\ttotpSecret = result.totpSecret === null ? undefined : result.totpSecret\n\t\t// eslint-disable-next-line @typescript-eslint/no-unused-vars, no-empty\n\t} catch (err) {}\n\n\treturn totpSecret\n}\n"],"names":["getTotpSecret","collection","payload","user","undefined","totpSecret","result","findByID","id","overrideAccess","select","showHiddenFields","err"],"mappings":"AAQA,OAAO,eAAeA,cAAc,EACnCC,UAAU,EACVC,OAAO,EACPC,IAAI,EACE;IACN,IAAI,CAACA,MAAM;QACV,OAAOC;IACR;IAEA,IAAIC;IAEJ,IAAI;QACH,MAAMC,SAAU,MAAMJ,QAAQK,QAAQ,CAAC;YACtCC,IAAIL,KAAKK,EAAE;YACXP;YACAQ,gBAAgB;YAChBC,QAAQ;gBACPL,YAAY;YACb;YACAM,kBAAkB;QAEnB,EAA6C,+BAA+B;;QAC5EN,aAAaC,OAAOD,UAAU,KAAK,OAAOD,YAAYE,OAAOD,UAAU;IACvE,uEAAuE;IACxE,EAAE,OAAOO,KAAK,CAAC;IAEf,OAAOP;AACR"}