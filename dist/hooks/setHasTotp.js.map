{"version":3,"sources":["../../src/hooks/setHasTotp.ts"],"sourcesContent":["import type { FieldHook, User } from 'payload'\n\nimport type { PayloadTOTPConfig } from '../types.js'\n\nimport { getTotpSecret } from '../utilities/getTotpSecret.js'\n\nexport const setHasTotp: (pluginOptions: PayloadTOTPConfig) => FieldHook =\n\t(pluginOptions) =>\n\tasync ({ collection, data, req: { payload } }) => {\n\t\tconst totpSecret = await getTotpSecret({\n\t\t\tcollection: collection?.slug || pluginOptions.collection,\n\t\t\tpayload,\n\t\t\tuser: data as User,\n\t\t})\n\n\t\treturn Boolean(totpSecret)\n\t}\n"],"names":["getTotpSecret","setHasTotp","pluginOptions","collection","data","req","payload","totpSecret","slug","user","Boolean"],"mappings":"AAIA,SAASA,aAAa,QAAQ,gCAA+B;AAE7D,OAAO,MAAMC,aACZ,CAACC,gBACD,OAAO,EAAEC,UAAU,EAAEC,IAAI,EAAEC,KAAK,EAAEC,OAAO,EAAE,EAAE;QAC5C,MAAMC,aAAa,MAAMP,cAAc;YACtCG,YAAYA,YAAYK,QAAQN,cAAcC,UAAU;YACxDG;YACAG,MAAML;QACP;QAEA,OAAOM,QAAQH;IAChB,EAAC"}